#ë§ˆë²•ì‚¬ ìƒì–´ì™€ íŒŒì´ì–´ë³¼

## ğŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
```
"""
ì‹œê°„ì œí•œ 1ì´ˆ
ë©”ëª¨ë¦¬ ì œí•œ 512MB

ë§ˆë²•ì‚¬ ìƒì–´ëŠ” íŒŒì´ì–´ë³¼, í† ë„¤ì´ë„, íŒŒì´ì–´ìŠ¤í†°, ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ í•  ìˆ˜ ìˆë‹¤. ì˜¤ëŠ˜ ìƒˆë¡œ ë°°ìš´ ë§ˆë²•ì€ ë¹„ë°”ë¼ê¸°ì´ë‹¤. 
ë¹„ë°”ë¼ê¸°ë¥¼ ì‹œì „í•˜ë©´ í•˜ëŠ˜ì— ë¹„êµ¬ë¦„ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì˜¤ëŠ˜ì€ ë¹„ë°”ë¼ê¸°ë¥¼ í¬ê¸°ê°€ NxNì¸ ê²©ìì—ì„œ ì—°ìŠµí•˜ë ¤ê³  í•œë‹¤. 
* ê²©ìì˜ ê° ì¹¸ì—ëŠ” ë°”êµ¬ë‹ˆê°€ í•˜ë‚˜ ìˆê³ , ë°”êµ¬ë‹ˆëŠ” ì¹¸ ì „ì²´ë¥¼ ì°¨ì§€í•œë‹¤. 
* ë°”êµ¬ë‹ˆì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ë¬¼ì˜ ì–‘ì—ëŠ” ì œí•œì´ ì—†ë‹¤. 
* (r, c)ëŠ” ê²©ìì˜ rí–‰ cì—´ì— ìˆëŠ” ë°”êµ¬ë‹ˆë¥¼ ì˜ë¯¸í•˜ê³ , 
* A[r][c]ëŠ” (r, c)ì— ìˆëŠ” ë°”êµ¬ë‹ˆì— ì €ì¥ë˜ì–´ ìˆëŠ” ë¬¼ì˜ ì–‘ì„ ì˜ë¯¸í•œë‹¤.

ê²©ìì˜ ê°€ì¥ ì™¼ìª½ ìœ— ì¹¸ì€ (1, 1)ì´ê³ , ê°€ì¥ ì˜¤ë¥¸ìª½ ì•„ë« ì¹¸ì€ (N, N)ì´ë‹¤. ë§ˆë²•ì‚¬ ìƒì–´ëŠ” ì—°ìŠµì„ ìœ„í•´ 1ë²ˆ í–‰ê³¼ Në²ˆ í–‰ì„ ì—°ê²°í–ˆê³ , 
1ë²ˆ ì—´ê³¼ Në²ˆ ì—´ë„ ì—°ê²°í–ˆë‹¤. ì¦‰, Në²ˆ í–‰ì˜ ì•„ë˜ì—ëŠ” 1ë²ˆ í–‰ì´, 1ë²ˆ í–‰ì˜ ìœ„ì—ëŠ” Në²ˆ í–‰ì´ ìˆê³ , 1ë²ˆ ì—´ì˜ ì™¼ìª½ì—ëŠ” Në²ˆ ì—´ì´, Në²ˆ ì—´ì˜ ì˜¤ë¥¸ìª½ì—ëŠ” 1ë²ˆ ì—´ì´ ìˆë‹¤.

ë¹„ë°”ë¼ê¸°ë¥¼ ì‹œì „í•˜ë©´ (N, 1), (N, 2), (N-1, 1), (N-1, 2)ì— ë¹„êµ¬ë¦„ì´ ìƒê¸´ë‹¤. êµ¬ë¦„ì€ ì¹¸ ì „ì²´ë¥¼ ì°¨ì§€í•œë‹¤. 

ì´ì œ êµ¬ë¦„ì— ì´ë™ì„ Më²ˆ ëª…ë ¹í•˜ë ¤ê³  í•œë‹¤. 
ië²ˆì§¸ ì´ë™ ëª…ë ¹ì€ ë°©í–¥ diê³¼ ê±°ë¦¬ sië¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. 
ë°©í–¥ì€ ì´ 8ê°œì˜ ë°©í–¥ì´ ìˆìœ¼ë©°, 8ê°œì˜ ì •ìˆ˜ë¡œ í‘œí˜„í•œë‹¤. 
1ë¶€í„° ìˆœì„œëŒ€ë¡œ â†, â†–, â†‘, â†—, â†’, â†˜, â†“, â†™ ì´ë‹¤. ì´ë™ì„ ëª…ë ¹í•˜ë©´ ë‹¤ìŒì´ ìˆœì„œëŒ€ë¡œ ì§„í–‰ëœë‹¤.

* ëª¨ë“  êµ¬ë¦„ì´ di ë°©í–¥ìœ¼ë¡œ siì¹¸ ì´ë™í•œë‹¤.
* ê° êµ¬ë¦„ì—ì„œ ë¹„ê°€ ë‚´ë ¤ êµ¬ë¦„ì´ ìˆëŠ” ì¹¸ì˜ ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 1 ì¦ê°€í•œë‹¤.
* êµ¬ë¦„ì´ ëª¨ë‘ ì‚¬ë¼ì§„ë‹¤.
* 2ì—ì„œ ë¬¼ì´ ì¦ê°€í•œ ì¹¸ (r, c)ì— ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‹œì „í•œë‹¤. ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‚¬ìš©í•˜ë©´, ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì— ë¬¼ì´ ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ìˆ˜ë§Œí¼ (r, c)ì— ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ë¬¼ì´ ì–‘ì´ ì¦ê°€í•œë‹¤.
  * ì´ë•ŒëŠ” ì´ë™ê³¼ ë‹¤ë¥´ê²Œ ê²½ê³„ë¥¼ ë„˜ì–´ê°€ëŠ” ì¹¸ì€ ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì´ ì•„ë‹ˆë‹¤.
  * ì˜ˆë¥¼ ë“¤ì–´, (N, 2)ì—ì„œ ì¸ì ‘í•œ ëŒ€ê°ì„  ì¹¸ì€ (N-1, 1), (N-1, 3)ì´ê³ , (N, N)ì—ì„œ ì¸ì ‘í•œ ëŒ€ê°ì„  ì¹¸ì€ (N-1, N-1)ë¿ì´ë‹¤.
* ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì¸ ëª¨ë“  ì¹¸ì— êµ¬ë¦„ì´ ìƒê¸°ê³ , ë¬¼ì˜ ì–‘ì´ 2 ì¤„ì–´ë“ ë‹¤. ì´ë•Œ êµ¬ë¦„ì´ ìƒê¸°ëŠ” ì¹¸ì€ 3ì—ì„œ êµ¬ë¦„ì´ ì‚¬ë¼ì§„ ì¹¸ì´ ì•„ë‹ˆì–´ì•¼ í•œë‹¤.

Më²ˆì˜ ì´ë™ì´ ëª¨ë‘ ëë‚œ í›„ ë°”êµ¬ë‹ˆì— ë“¤ì–´ìˆëŠ” ë¬¼ì˜ ì–‘ì˜ í•©ì„ êµ¬í•´ë³´ì.

ì…ë ¥
ì²«ì§¸ ì¤„ì— N, Mì´ ì£¼ì–´ì§„ë‹¤.
ë‘˜ì§¸ ì¤„ë¶€í„° Nê°œì˜ ì¤„ì—ëŠ” Nê°œì˜ ì •ìˆ˜ê°€ ì£¼ì–´ì§„ë‹¤. rë²ˆì§¸ í–‰ì˜ cë²ˆì§¸ ì •ìˆ˜ëŠ” A[r][c]ë¥¼ ì˜ë¯¸í•œë‹¤.

ë‹¤ìŒ Mê°œì˜ ì¤„ì—ëŠ” ì´ë™ì˜ ì •ë³´ di, siê°€ ìˆœì„œëŒ€ë¡œ í•œ ì¤„ì— í•˜ë‚˜ì”© ì£¼ì–´ì§„ë‹¤.

ì¶œë ¥
ì²«ì§¸ ì¤„ì— Më²ˆì˜ ì´ë™ì´ ëª¨ë‘ ëë‚œ í›„ ë°”êµ¬ë‹ˆì— ë“¤ì–´ìˆëŠ” ë¬¼ì˜ ì–‘ì˜ í•©ì„ ì¶œë ¥í•œë‹¤.
```
## ğŸ’¡ë¬¸ì œ ì •ë¦¬
* ëª…ë ¹ 1ê°œë‹¹ í•˜ëŠ” ì¼
  * ì´ë™í•˜ê¸°
    * íŒŒì´ì–´ë³¼ì´ ìˆìœ¼ë©´ í•´ë‹¹ íŒŒì´ì–´ë³¼ì— í•´ë‹¹í•˜ëŠ” ì†ë ¥ê³¼ ë°©í–¥ì„ í† ëŒ€ë¡œ ì´ë™í•œë‹¤
  * í•©ì¹˜ê¸°
    * í•œ ì¹¸ì— íŒŒì´ì–´ë³¼ì´ 2ê°œ ì´ìƒ ìˆëŠ” ê²ƒì„ ì°¾ëŠ”ë‹¤
    * í•´ë‹¹ ì¹¸ì˜ì˜ íŒŒì´ì–´ë³¼ì„ í•©ì¹œ í›„ 4ê°œë¡œ ë‚˜ëˆˆë‹¤
      * ì§ˆëŸ‰ì€ âŒŠ(í•©ì³ì§„ íŒŒì´ì–´ë³¼ ì§ˆëŸ‰ì˜ í•©)/5âŒ‹ì´ë‹¤.
        * ì§ˆëŸ‰ì´ 0ì¸ íŒŒì´ì–´ë³¼ì€ ì†Œë©¸ë˜ì–´ ì—†ì–´ì§„ë‹¤.
      * ì†ë ¥ì€ âŒŠ(í•©ì³ì§„ íŒŒì´ì–´ë³¼ ì†ë ¥ì˜ í•©)/(í•©ì³ì§„ íŒŒì´ì–´ë³¼ì˜ ê°œìˆ˜)âŒ‹
      * í•©ì³ì§€ëŠ” íŒŒì´ì–´ë³¼ì˜ ë°©í–¥ì´ ëª¨ë‘ í™€ìˆ˜ì´ê±°ë‚˜ ëª¨ë‘ ì§ìˆ˜ì´ë©´, ë°©í–¥ì€ 0, 2, 4, 6ì´ ë˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ 1, 3, 5, 7ì´ ëœë‹¤.

## ğŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
3ì°¨ì› ë°°ì—´ì„ ë§Œë“¤ì—ˆë‹¤ ì™œ? í•´ë‹¹ì¹¸ì— 2ê°œ ì´ìƒì˜ íŒŒì´ì–´ë³¼ì´ ìˆì„ ìˆ˜ ìˆê¸° ë•Œë¬¸

* ëª…ë ¹ 1ê°œë‹¹ í•˜ëŠ” ì¼
  * ì´ë™í•˜ê¸°
    * ì„ì‹œë°°ì—´ì„ ë§Œë“ ë‹¤
    * ì´ì¤‘ forë¬¸ì„ í†µí•´ íŒŒì´ì–´ë³¼ì´ ìˆëŠ” ê²ƒì„ ì°¾ëŠ”ë‹¤ 0 ì´ìƒ
    * ì´ë™ ìœ„ì¹˜ ê³„ì‚°
      * ë¬¸ì œì—ì„œ "1ë²ˆë¶€í„° Në²ˆê¹Œì§€ ë²ˆí˜¸ê°€ ë§¤ê²¨ì ¸ ìˆê³ , 1ë²ˆ í–‰ì€ Në²ˆê³¼ ì—°ê²°ë˜ì–´ ìˆê³ , 1ë²ˆ ì—´ì€ Në²ˆ ì—´ê³¼ ì—°ê²°"ì´ë¼ê³  í–ˆë‹¤
        * ì¦‰ ì´ì–´ì ¸ìˆë‹¤ëŠ” ê²ƒ
        * n_x = (x + loc[i["d"]][0] * i["s"]) % N ì´ë ‡ê²Œ ê³„ì‚°í•œ í›„ % Nì„ í•´ì¤€ë‹¤
    * ì´ë™ í›„ ì„ì‹œ ë°°ì—´ì— ì¶”ê°€
    * ì›ë˜ ë°°ì—´ì„ ì„ì‹œ ë°°ì—´ë¡œ ì—…ë°ì´íŠ¸
  * í•©ì¹˜ê¸°
    * ì´ì¤‘ forë¬¸ì„ í†µí•´ íŒŒì´ì–´ë³¼ì´ 2ê°œ ì´ìƒìˆëŠ” ì¹¸ì„ ì°¾ëŠ”ë‹¤
    * í•´ë‹¹ ì¹¸ì˜ì˜ íŒŒì´ì–´ë³¼ì„ í•©ì¹œ í›„ 4ê°œë¡œ ë‚˜ëˆˆë‹¤
      * í•´ë‹¹ ì¹¸ì— ìˆëŠ” íŒŒì´ì–´ë³¼ ì§ˆëŸ‰ì„ í•©ì¹œë‹¤
      * í•´ë‹¹ ì¹¸ì— ìˆëŠ” íŒŒì´ì–´ë³¼ ì†ë ¥ì„ í•©ì¹œë‹¤
      * ë°©í–¥ì´ ì§ìˆ˜ì¸ ê°œìˆ˜ì™€ í™€ìˆ˜ì¸ ê°œìˆ˜ë¥¼ êµ¬í•œë‹¤
      * A[x][y] = [] í•´ë‹¹ ì¹¸ì„ ë¹„ì–´ì¤€ë‹¤
        * ìƒˆë¡œìš´ ê°’ì´ ì¶”ê°€ë  ê²ƒì´ê¸° ë•Œë¬¸

      * ì§ˆëŸ‰ì€ âŒŠ(í•©ì³ì§„ íŒŒì´ì–´ë³¼ ì§ˆëŸ‰ì˜ í•©)/5âŒ‹
        * ì—¬ê¸°ì„œ ì§ˆëŸ‰ì´ 0ì´ ëœë‹¤ë©´ ì†Œë©¸ë˜ë¯€ë¡œ continue í•´ì¤€ë‹¤ A[x][y] = []í•´ì¤¬ìœ¼ë‹ˆ ì†Œë©¸ëœê²ƒìœ¼ë¡œ ë¨
      * ì†ë ¥ì€ âŒŠ(í•©ì³ì§„ íŒŒì´ì–´ë³¼ ì†ë ¥ì˜ í•©)/(í•©ì³ì§„ íŒŒì´ì–´ë³¼ì˜ ê°œìˆ˜)âŒ‹
      * í™€ìˆ˜ì˜ ê°œìˆ˜ ë˜ëŠ” ì§ìˆ˜ì˜ ê°œìˆ˜ê°€ íŒŒì´ì–´ë³¼ ê°œìˆ˜ì™€ ê°™ë‹¤ë©´ ë°©í–¥ì€ 0, 2, 4, 6ì´ ë˜ê³ 
        * ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ 1, 3, 5, 7ì´ ëœë‹¤.

## ğŸ’¡ì½”ë“œ

```python
import sys

# ì´ë™ ë°©í–¥ ì„¤ì •
loc = [[-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1]]

def move():
    global A
    # ì„ì‹œ ë°°ì—´ ì´ˆê¸°í™”
    tmp = [[[] for _ in range(N)] for _ in range(N)]
    # ëª¨ë“  íŒŒì´ì–´ë³¼ ì´ë™ ì²˜ë¦¬
    for x in range(N):
        for y in range(N):
            if len(A[x][y]) != 0:
                for i in A[x][y]:
                    # ì´ë™ ìœ„ì¹˜ ê³„ì‚°
                    n_x = (x + loc[i["d"]][0] * i["s"]) % N
                    n_y = (y + loc[i["d"]][1] * i["s"]) % N
                    # ì´ë™í•œ ìœ„ì¹˜ì— íŒŒì´ì–´ë³¼ ì •ë³´ ì¶”ê°€
                    tmp[n_x][n_y].append({"m": i["m"], "s": i["s"], "d": i["d"]})
    # í˜„ì¬ ë°°ì—´ ì—…ë°ì´íŠ¸
    A = tmp

def divide():
    # ëª¨ë“  ì¹¸ì— ëŒ€í•´ íŒŒì´ì–´ë³¼ ë¶„ë¦¬ ì²˜ë¦¬
    for x in range(N):
        for y in range(N):
            if len(A[x][y]) > 1:
                # íŒŒì´ì–´ë³¼ ì •ë³´ í•©ì‚° ì´ˆê¸°í™”
                m_sum = 0
                s_sum = 0
                odd = 0
                even = 0
                # íŒŒì´ì–´ë³¼ ì •ë³´ í•©ì‚°
                for i in A[x][y]:
                    m_sum += i["m"]
                    s_sum += i["s"]
                    # ë°©í–¥ í™€ì§ ì—¬ë¶€ í™•ì¸
                    if i["d"] % 2 == 0:
                        even += 1
                    else:
                        odd += 1
                cnt = len(A[x][y])
                A[x][y] = []
                # íŒŒì´ì–´ë³¼ ë¶„ë¦¬ ë° ì¶”ê°€
                m = m_sum // 5
                if m == 0:
                    continue
                s = s_sum // cnt
                if even == cnt or odd == cnt:
                    d = [0, 2, 4, 6]  # ë°©í–¥ì´ ëª¨ë‘ í™€ìˆ˜ê±°ë‚˜ ì§ìˆ˜ì¸ ê²½ìš°
                else:
                    d = [1, 3, 5, 7]  # ë°©í–¥ì´ í™€ìˆ˜ì™€ ì§ìˆ˜ê°€ ì„ì¸ ê²½ìš°
                for i in d:
                    A[x][y].append({"m": m, "s": s, "d": i})

# ì…ë ¥ ë°›ê¸°
N, M, K = map(int, sys.stdin.readline().strip().split())
A = [[[] for _ in range(N)] for _ in range(N)]
for _ in range(M):
    r, c, m, s, d = map(int, sys.stdin.readline().strip().split())
    A[r - 1][c - 1].append({"m": m, "s": s, "d": d})

# Kë²ˆ ì´ë™ ë° ë¶„ë¦¬ ìˆ˜í–‰
for _ in range(K):
    move()
    divide()

# ë‚¨ì•„ìˆëŠ” íŒŒì´ì–´ë³¼ ì§ˆëŸ‰ í•©ì‚°
cnt = 0
for x in range(N):
    for y in range(N):
        for i in A[x][y]:
            cnt += i["m"]
print(cnt)
```

## ğŸ’¡ì‹œê°„ë³µì¡ë„
O(N^2)

## ğŸ’¡Â í‹€ë¦° ì´ìœ 

## ğŸ’¡Â ë‹¤ë¥¸ í’€ì´


## ğŸ’¡Â ëŠë‚€ì  or ê¸°ì–µí• ì •ë³´
1ë²ˆë¶€í„° Në²ˆê¹Œì§€ ë²ˆí˜¸ê°€ ë§¤ê²¨ì ¸ ìˆê³ , 1ë²ˆ í–‰ì€ Në²ˆê³¼ ì—°ê²°ë˜ì–´ ìˆê³ , 1ë²ˆ ì—´ì€ Në²ˆ ì—´ê³¼ ì—°ê²°

ì´ ë¶€ë¶„ì´ ì´í•´ê°€ ì˜ ì•ˆê°”ë‹¤ ê·¸ëŸ°ë° ì°¾ì•„ë³´ë‹ˆ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë„ í•´ë‹¹í•˜ëŠ” ê³³ìœ¼ë¡œ ê°ˆ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ì—ˆë‹¤
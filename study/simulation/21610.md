# ë§ˆë²•ì‚¬ ìƒì–´ì™€ ë¹„ë°”ë¼ê¸°

## ğŸ’¡ë¬¸ì œ ë¶„ì„ ìš”ì•½
```
ì‹œê°„ì œí•œ 1ì´ˆ
ë©”ëª¨ë¦¬ì œí•œ 1024MB

ë§ˆë²•ì‚¬ ìƒì–´ëŠ” íŒŒì´ì–´ë³¼, í† ë„¤ì´ë„, íŒŒì´ì–´ìŠ¤í†°, ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ í•  ìˆ˜ ìˆë‹¤. 
ì˜¤ëŠ˜ ìƒˆë¡œ ë°°ìš´ ë§ˆë²•ì€ ë¹„ë°”ë¼ê¸°ì´ë‹¤. ë¹„ë°”ë¼ê¸°ë¥¼ ì‹œì „í•˜ë©´ í•˜ëŠ˜ì— ë¹„êµ¬ë¦„ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. 
ì˜¤ëŠ˜ì€ ë¹„ë°”ë¼ê¸°ë¥¼ í¬ê¸°ê°€ NxNì¸ ê²©ìì—ì„œ ì—°ìŠµí•˜ë ¤ê³  í•œë‹¤. ê²©ìì˜ ê° ì¹¸ì—ëŠ” ë°”êµ¬ë‹ˆê°€ í•˜ë‚˜ ìˆê³ , ë°”êµ¬ë‹ˆëŠ” ì¹¸ ì „ì²´ë¥¼ ì°¨ì§€í•œë‹¤. 
ë°”êµ¬ë‹ˆì— ì €ì¥í•  ìˆ˜ ìˆëŠ” ë¬¼ì˜ ì–‘ì—ëŠ” ì œí•œì´ ì—†ë‹¤. (r, c)ëŠ” ê²©ìì˜ rí–‰ cì—´ì— ìˆëŠ” ë°”êµ¬ë‹ˆë¥¼ ì˜ë¯¸í•˜ê³ , 
A[r][c]ëŠ” (r, c)ì— ìˆëŠ” ë°”êµ¬ë‹ˆì— ì €ì¥ë˜ì–´ ìˆëŠ” ë¬¼ì˜ ì–‘ì„ ì˜ë¯¸í•œë‹¤.

ê²©ìì˜ ê°€ì¥ ì™¼ìª½ ìœ— ì¹¸ì€ (1, 1)ì´ê³ , ê°€ì¥ ì˜¤ë¥¸ìª½ ì•„ë« ì¹¸ì€ (N, N)ì´ë‹¤. 
ë§ˆë²•ì‚¬ ìƒì–´ëŠ” ì—°ìŠµì„ ìœ„í•´ 1ë²ˆ í–‰ê³¼ Në²ˆ í–‰ì„ ì—°ê²°í–ˆê³ , 1ë²ˆ ì—´ê³¼ Në²ˆ ì—´ë„ ì—°ê²°í–ˆë‹¤. 
ì¦‰, Në²ˆ í–‰ì˜ ì•„ë˜ì—ëŠ” 1ë²ˆ í–‰ì´, 1ë²ˆ í–‰ì˜ ìœ„ì—ëŠ” Në²ˆ í–‰ì´ ìˆê³ , 1ë²ˆ ì—´ì˜ ì™¼ìª½ì—ëŠ” Në²ˆ ì—´ì´, Në²ˆ ì—´ì˜ ì˜¤ë¥¸ìª½ì—ëŠ” 1ë²ˆ ì—´ì´ ìˆë‹¤.

ë¹„ë°”ë¼ê¸°ë¥¼ ì‹œì „í•˜ë©´ (N, 1), (N, 2), (N-1, 1), (N-1, 2)ì— ë¹„êµ¬ë¦„ì´ ìƒê¸´ë‹¤. êµ¬ë¦„ì€ ì¹¸ ì „ì²´ë¥¼ ì°¨ì§€í•œë‹¤. 

ì´ì œ êµ¬ë¦„ì— ì´ë™ì„ Më²ˆ ëª…ë ¹í•˜ë ¤ê³  í•œë‹¤. ië²ˆì§¸ ì´ë™ ëª…ë ¹ì€ ë°©í–¥ diê³¼ ê±°ë¦¬ sië¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. 
ë°©í–¥ì€ ì´ 8ê°œì˜ ë°©í–¥ì´ ìˆìœ¼ë©°, 8ê°œì˜ ì •ìˆ˜ë¡œ í‘œí˜„í•œë‹¤. 
1ë¶€í„° ìˆœì„œëŒ€ë¡œ â†, â†–, â†‘, â†—, â†’, â†˜, â†“, â†™ ì´ë‹¤. ì´ë™ì„ ëª…ë ¹í•˜ë©´ ë‹¤ìŒì´ ìˆœì„œëŒ€ë¡œ ì§„í–‰ëœë‹¤.

* ëª¨ë“  êµ¬ë¦„ì´ di ë°©í–¥ìœ¼ë¡œ siì¹¸ ì´ë™í•œë‹¤.
* ê° êµ¬ë¦„ì—ì„œ ë¹„ê°€ ë‚´ë ¤ êµ¬ë¦„ì´ ìˆëŠ” ì¹¸ì˜ ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 1 ì¦ê°€í•œë‹¤.
* êµ¬ë¦„ì´ ëª¨ë‘ ì‚¬ë¼ì§„ë‹¤.
* 2ì—ì„œ ë¬¼ì´ ì¦ê°€í•œ ì¹¸ (r, c)ì— ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‹œì „í•œë‹¤. ë¬¼ë³µì‚¬ë²„ê·¸ ë§ˆë²•ì„ ì‚¬ìš©í•˜ë©´, ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì— ë¬¼ì´ ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ìˆ˜ë§Œí¼ (r, c)ì— ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ë¬¼ì´ ì–‘ì´ ì¦ê°€í•œë‹¤.
  * ì´ë•ŒëŠ” ì´ë™ê³¼ ë‹¤ë¥´ê²Œ ê²½ê³„ë¥¼ ë„˜ì–´ê°€ëŠ” ì¹¸ì€ ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì¸ ì¹¸ì´ ì•„ë‹ˆë‹¤.
  * ì˜ˆë¥¼ ë“¤ì–´, (N, 2)ì—ì„œ ì¸ì ‘í•œ ëŒ€ê°ì„  ì¹¸ì€ (N-1, 1), (N-1, 3)ì´ê³ , (N, N)ì—ì„œ ì¸ì ‘í•œ ëŒ€ê°ì„  ì¹¸ì€ (N-1, N-1)ë¿ì´ë‹¤.
* ë°”êµ¬ë‹ˆì— ì €ì¥ëœ ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì¸ ëª¨ë“  ì¹¸ì— êµ¬ë¦„ì´ ìƒê¸°ê³ , ë¬¼ì˜ ì–‘ì´ 2 ì¤„ì–´ë“ ë‹¤. ì´ë•Œ êµ¬ë¦„ì´ ìƒê¸°ëŠ” ì¹¸ì€ 3ì—ì„œ êµ¬ë¦„ì´ ì‚¬ë¼ì§„ ì¹¸ì´ ì•„ë‹ˆì–´ì•¼ í•œë‹¤.

Më²ˆì˜ ì´ë™ì´ ëª¨ë‘ ëë‚œ í›„ ë°”êµ¬ë‹ˆì— ë“¤ì–´ìˆëŠ” ë¬¼ì˜ ì–‘ì˜ í•©ì„ êµ¬í•´ë³´ì.

ì…ë ¥
ì²«ì§¸ ì¤„ì— N, Mì´ ì£¼ì–´ì§„ë‹¤.
ë‘˜ì§¸ ì¤„ë¶€í„° Nê°œì˜ ì¤„ì—ëŠ” Nê°œì˜ ì •ìˆ˜ê°€ ì£¼ì–´ì§„ë‹¤. rë²ˆì§¸ í–‰ì˜ cë²ˆì§¸ ì •ìˆ˜ëŠ” A[r][c]ë¥¼ ì˜ë¯¸í•œë‹¤.
ë‹¤ìŒ Mê°œì˜ ì¤„ì—ëŠ” ì´ë™ì˜ ì •ë³´ di, siê°€ ìˆœì„œëŒ€ë¡œ í•œ ì¤„ì— í•˜ë‚˜ì”© ì£¼ì–´ì§„ë‹¤.

ì¶œë ¥
ì²«ì§¸ ì¤„ì— Më²ˆì˜ ì´ë™ì´ ëª¨ë‘ ëë‚œ í›„ ë°”êµ¬ë‹ˆì— ë“¤ì–´ìˆëŠ” ë¬¼ì˜ ì–‘ì˜ í•©ì„ ì¶œë ¥í•œë‹¤.
```
## ğŸ’¡ë¬¸ì œ ì •ë¦¬
* ë§¨ ì²˜ìŒ êµ¬ë¦„ì€ (N, 1), (N, 2), (N-1, 1), (N-1, 2)ì— ìˆë‹¤
* ëª…ë ¹ 1ê°œë‹¹ í•˜ëŠ” ì¼
  * ì´ë™í•˜ê¸°
    * ëª¨ë“  êµ¬ë¦„ì´ di ë°©í–¥ìœ¼ë¡œ siì¹¸ ì´ë™
      * "1ë²ˆ í–‰ê³¼ Në²ˆ í–‰ì„ ì—°ê²°í–ˆê³ , 1ë²ˆ ì—´ê³¼ Në²ˆ ì—´ë„ ì—°ê²°" í–ˆìœ¼ë¯€ë¡œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ê·¸ ìœ„ì¹˜ë¡œ ì´ë™
    * ì´ë™í•œ ì¹¸ì— ë¹„ê°€ ë‚´ë ¤ ê°’ì´ +1 ì¦ê°€
  * ë¬¼ ë³µì‚¬
    * "ì´ë™í•˜ê¸°"ì—ì„œ ë¬¼ì´ ì¦ê°€í•œ ë°”êµ¬ë‹ˆì—ì„œ
    * ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì´ê³  ë¬¼ì´ ë“¤ì–´ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ê°œìˆ˜ë¥¼ êµ¬í•œë‹¤
      * ì—¬ê¸°ì„œ "ì´ë™í•˜ê¸°"ì²˜ëŸ¼ ë²”ìœ„ë¥¼ ë²—ì–´ë‚  ìˆ˜ ì—†ìŒ
    * í•´ë‹¹ ë°”êµ¬ë‹ˆë¥¼ + ë°”êµ¬ë‹ˆ ê°œìˆ˜(ëŒ€ê°ì„  1, ë¬¼>0)
  * êµ¬ë¦„ ë§Œë“¤ê¸°
    * ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì´ê³  "ì´ë™í•˜ê¸°"ì˜ ê²°ê³¼ì¸ ì¹¸ì´ ì•„ë‹Œ ê³³ì„ ì°¾ëŠ”ë‹¤
    * í•´ë‹¹ ì¹¸ì€ ë¬¼ì„ -2ë¥¼ í•´ì¤€ë‹¤

## ğŸ’¡ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„
* visited ë°°ì—´ì„ ë§Œë“¤ì–´ì„œ êµ¬ë¦„ì˜ ìœ„ì¹˜ë¥¼ ì €ì¥í•´ì¤¬ë‹¤
  * ë§¨ ì²˜ìŒ êµ¬ë¦„ì€ (N-1, 0), (N-1, 1), (N-2, 0), (N-2, 1)ì— ìˆìœ¼ë¯€ë¡œ í•´ë‹¹ ì¹¸ì„ 1ë¡œ í‘œì‹œ
  * ìœ„ì¹˜ë¥¼ -1ì”© í•´ì¤€ ì´ìœ ëŠ” ë¬¸ì œì—ëŠ” ë²ˆí˜¸ê°€ 1ë¶€í„° ì‹œì‘í•˜ê¸° ë•Œë¬¸(ë°°ì—´ì€ 0ë¶€í„°ë‹¤)
* ëª…ë ¹ 1ê°œë‹¹ í•˜ëŠ” ì¼
  * ì´ë™í•˜ê¸°
    * ì„ì‹œ ë°°ì—´ ìƒì„± (ì´ë™í•œ êµ¬ë¦„ì˜ ìœ„ì¹˜ë¥¼ ì €ì¥)
      * ì›ë˜ ë°°ì—´ì— ì—…ë°ì´íŠ¸í•˜ë©´ ê·¸ ìš°ì¹˜ì—ì„œ ë˜ ê³„ì‚°ë¨
    * ì´ì¤‘ forë¬¸ìœ¼ë¡œ êµ¬ë¦„ì„ ì°¾ëŠ”ë‹¤ (visited[x][y]ê°€ 1ì¸ ê²½ìš°)
        * ëª¨ë“  êµ¬ë¦„ì´ di ë°©í–¥ìœ¼ë¡œ siì¹¸ ì´ë™
        * "1ë²ˆ í–‰ê³¼ Në²ˆ í–‰ì„ ì—°ê²°í–ˆê³ , 1ë²ˆ ì—´ê³¼ Në²ˆ ì—´ë„ ì—°ê²°" í–ˆìœ¼ë¯€ë¡œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ê·¸ ìœ„ì¹˜ë¡œ ì´ë™
            * ì¦‰ %Nì„ í•´ì¤€ë‹¤
        * ì´ë™í•œ ì¹¸ì— ë¹„ê°€ ë‚´ë ¤ ê°’ì´ +1 ì¦ê°€
        * ì´ë™í•œ êµ¬ë¦„ì„ ì„ì‹œ ë°°ì—´ì— ì—…ë°ì´íŠ¸
        * ì „ë¶€ ëë‚˜ë©´ ì›ë˜ ë°©ë¬¸ë°°ì—´ì„ ì„ì‹œ ë°°ì—´ë¡œ ì—…ë°ì´íŠ¸
  * ë¬¼ ë³µì‚¬
    * "ì´ë™í•˜ê¸°"ì—ì„œ ë¬¼ì´ ì¦ê°€í•œ ë°”êµ¬ë‹ˆì—ì„œ
      * ì´ ë¶€ë¶„ì€ visitedì— ì €ì¥ë˜ì—ˆìœ¼ë¯€ë¡œ visited=1ì¸ ë¶€ë¶„ì„ ì°¾ëŠ”ë‹¤
    * ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ê°€ 1ì´ê³  ë¬¼ì´ ë“¤ì–´ìˆëŠ” ë°”êµ¬ë‹ˆì˜ ê°œìˆ˜ë¥¼ êµ¬í•œë‹¤
      * locì—ì„œ 1,3,5,7ì´ ëŒ€ê°ì„  ë°©í–¥ì´ë¯€ë¡œ range(1, 8, 2)í•¨
      * ì—¬ê¸°ì„œ "ì´ë™í•˜ê¸°"ì²˜ëŸ¼ ë²”ìœ„ë¥¼ ë²—ì–´ë‚  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ë²”ìœ„ ê²€ì‚¬
    * í•´ë‹¹ ë°”êµ¬ë‹ˆë¥¼ + ë°”êµ¬ë‹ˆ ê°œìˆ˜(ëŒ€ê°ì„  1, ë¬¼>0)
  * êµ¬ë¦„ ë§Œë“¤ê¸°
    * ë¬¼ì˜ ì–‘ì´ 2 ì´ìƒì´ê³  "ì´ë™í•˜ê¸°"ì˜ ê²°ê³¼ì¸ ì¹¸ì´ ì•„ë‹Œ ê³³ì„ ì°¾ëŠ”ë‹¤
      * "ì´ë™í•˜ê¸°"ì˜ ê²°ê³¼ì¸ ì¹¸ì¸ ê³³ì€ visited=1ë¡œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ 0ì¸ê³³ì„ ì°¾ëŠ”ë‹¤
    * í•´ë‹¹ ì¹¸ì€ ë¬¼ì„ -2ë¥¼ í•´ì¤€ë‹¤

## ğŸ’¡ì½”ë“œ

```python
import sys

# êµ¬ë¦„ ì´ë™ í•¨ìˆ˜
def move(d, s):
    global visited
    # ì„ì‹œ ë°°ì—´ ì´ˆê¸°í™”
    tmp = [[0 for _ in range(N)] for _ in range(N)]
    # ëª¨ë“  êµ¬ë¦„ì— ëŒ€í•´ ì´ë™ ì²˜ë¦¬
    for x in range(N):
        for y in range(N):
            if visited[x][y] == 1:
                # ì´ë™í•œ ìœ„ì¹˜ ê³„ì‚°
                n_x = (x + loc[d - 1][0] * s) % N
                n_y = (y + loc[d - 1][1] * s) % N
                #ë¹„ê°€ ë‚´ë¦¬ë¯€ë¡œ 1 ì¦ê°€
                A[n_x][n_y] += 1
                #ì´ë™í•œ ìœ„ì¹˜ë¥¼ ì €ì¥
                tmp[n_x][n_y] = 1

    # ë°©ë¬¸í•œ ìœ„ì¹˜(êµ¬ë¦„ ìœ„ì¹˜) ì—…ë°ì´íŠ¸
    visited = tmp

# ë¬¼ë³µì‚¬ í•¨ìˆ˜
def copy():
    for x in range(N):
        for y in range(N):
            if visited[x][y] == 1:
                cnt = 0 #ë°”êµ¬ë‹ˆ ê°œìˆ˜
                # ì£¼ë³€ ëŒ€ê°ì„  ë°©í–¥ìœ¼ë¡œ ê²€ì‚¬
                # locì—ì„œ 1,3,5,7ì´ ëŒ€ê°ì„  ë°©í–¥ì´ë¯€ë¡œ range(1, 8, 2)í•¨
                for i in range(1, 8, 2):
                    n_x = x + loc[i][0]
                    n_y = y + loc[i][1]
                    #ì´ë™í•˜ê¸°ì™€ ë‹¤ë¥´ê²Œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë©´ ì•ˆë¨
                    if 0 <= n_x < N and 0 <= n_y < N and A[n_x][n_y] > 0:
                        #ë°”êµ¬ë‹ˆ ê°œìˆ˜ ì¦ê°€
                        cnt += 1
                # ëŒ€ê°ì„  ë°©í–¥ì˜ ë¬¼ì´ ë“  ë°”êµ¬ë‹ˆ ê°œìˆ˜ë§Œí¼ ì¦ê°€
                A[x][y] += cnt

# ìƒˆë¡œìš´ êµ¬ë¦„ ìƒì„± í•¨ìˆ˜
def create():
    global visited
    # ì„ì‹œ ë°°ì—´ ì´ˆê¸°í™” (êµ¬ë¦„ ìœ„ì¹˜)
    tmp = [[0 for _ in range(N)] for _ in range(N)]
    # êµ¬ë¦„ ì°¾ê¸°
    for x in range(N):
        for y in range(N):
            #ë¬¼ì˜ ì–‘ì´ 2ì´ìƒì´ê³  "ì´ë™í•˜ê¸°"ì—ì„œ ì´ë™ëœ êµ¬ë¦„ì˜ ìœ„ì¹˜ê°€ ì•„ë‹ˆì–´ì•¼ í•¨
            if A[x][y] >= 2 and visited[x][y] == 0:
                tmp[x][y] = 1 #í•´ë‹¹ ìœ„ì¹˜ì— êµ¬ë¦„ì´ ìƒì„±ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ í‘œì‹œ
                A[x][y] -= 2 #êµ¬ë¦„ì´ ë§Œë“¤ì–´ ì§„ ê³³ì€ -2

    # ë°©ë¬¸í•œ ìœ„ì¹˜(êµ¬ë¦„ ìœ„ì¹˜) ì—…ë°ì´íŠ¸
    visited = tmp

# ì…ë ¥ ë°›ê¸°
N, M = map(int, sys.stdin.readline().strip().split())
A = [list(map(int, sys.stdin.readline().strip().split())) for _ in range(N)]
visited = [[0 for _ in range(N)] for _ in range(N)]
# ì´ˆê¸° êµ¬ë¦„ ìœ„ì¹˜ ì„¤ì •
visited[N - 1][0] = 1
visited[N - 1][1] = 1
visited[N - 2][0] = 1
visited[N - 2][1] = 1

# ì´ë™ ë°©í–¥ ì„¤ì • (ì¢Œí‘œ ì´ë™ì— ëŒ€í•œ ì •ë³´)
loc = [[0, -1], [-1, -1], [-1, 0], [-1, 1], [0, 1], [1, 1], [1, 0], [1, -1]]

# Më²ˆì˜ ì´ë™ê³¼ ë³€í™” ë°˜ë³µ
for _ in range(M):
    d, s = map(int, sys.stdin.readline().strip().split())
    move(d, s)
    copy()
    create()

# ë‚¨ì•„ìˆëŠ” ë¬¼ì˜ ì–‘ í•©ì‚°
print(sum([sum(i) for i in A]))
```

## ğŸ’¡ì‹œê°„ë³µì¡ë„
O(N^2)

## ğŸ’¡Â í‹€ë¦° ì´ìœ 

## ğŸ’¡Â ë‹¤ë¥¸ í’€ì´


## ğŸ’¡Â ëŠë‚€ì  or ê¸°ì–µí• ì •ë³´
ëŠë‚€ ì ì€ ë”±íˆ ì—†ì§€ë§Œ,,
ì´ë™í•œ í›„ì— ì›ë˜ ë°©ë¬¸ ë°°ì—´ì— ì´ë™í•œ ê²ƒì„ ì—…ë°ì´íŠ¸ í•´ë²„ë¦¬ë©´ forë¬¸ì„ ëŒë¦¬ë‹¤ê°€ ì—…ë°ì´íŠ¸ í•œê²ƒì„ ë§Œë‚˜ì„œ ì˜ëª» ê³„ì‚° ë  ìˆ˜ ìˆìœ¼ë‹ˆ
ì„ì‹œ ë°°ì—´ì„ ë§Œë“¤ì–´ì„œ ì €ì¥í•œ ë’¤ì— ì—…ë°ì´íŠ¸ í•˜ì
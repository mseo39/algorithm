# BFS μ¤νμ… μ €μ§€

## π’΅**λ¬Έμ  λ¶„μ„ μ”μ•½**

μ‹κ°„μ ν• 2μ΄
λ©”λ¨λ¦¬μ ν• 512MB

BOJμ—μ„ μ •λ‹µμ΄ μ—¬λ¬κ°€μ§€μΈ κ²½μ°μ—λ” μ¤νμ… μ €μ§€λ¥Ό μ‚¬μ©ν•λ‹¤. μ¤νμ… μ €μ§€λ” μ μ €κ°€ μ¶λ ¥ν• λ‹µμ„ κ²€μ¦ν•λ” μ½”λ“λ¥Ό ν†µν•΄μ„ μ •λ‹µ μ λ¬΄λ¥Ό κ²°μ •ν•λ” λ°©μ‹μ΄λ‹¤. 
μ¤λμ€ μ¤νμ… μ €μ§€ μ½”λ“λ¥Ό ν•λ‚ λ§λ“¤μ–΄λ³΄λ ¤κ³  ν•λ‹¤.

μ •μ μ κ°μκ°€ Nμ΄κ³ , μ •μ μ— 1λ¶€ν„° NκΉμ§€ λ²νΈκ°€ λ§¤κ²¨μ Έμλ” μ–‘λ°©ν–¥ κ·Έλν”„κ°€ μμ„ λ•, BFS μ•κ³ λ¦¬μ¦μ€ λ‹¤μκ³Ό κ°™μ€ ν•νƒλ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤.

1. νμ— μ‹μ‘ μ •μ μ„ λ„£λ”λ‹¤. μ΄ λ¬Έμ μ—μ„ μ‹μ‘ μ •μ μ€ 1μ΄λ‹¤. 1μ„ λ°©λ¬Έν–λ‹¤κ³  μ²λ¦¬ν•λ‹¤.
2. νκ°€ λΉ„μ–΄ μμ§€ μ•μ€ λ™μ• λ‹¤μμ„ λ°λ³µν•λ‹¤.
  1. νμ— λ“¤μ–΄μλ” μ²« μ •μ μ„ νμ—μ„ κΊΌλ‚Έλ‹¤. μ΄ μ •μ μ„ xλΌκ³  ν•μ.
  2. xμ™€ μ—°κ²°λμ–΄ μμΌλ©΄, μ•„μ§ λ°©λ¬Έν•μ§€ μ•μ€ μ •μ  yλ¥Ό λ¨λ‘ νμ— λ„£λ”λ‹¤. λ¨λ“  yλ¥Ό λ°©λ¬Έν–λ‹¤κ³  μ²λ¦¬ν•λ‹¤.

2-2λ‹¨κ³„μ—μ„ λ°©λ¬Έν•μ§€ μ•μ€ μ •μ μ„ λ°©λ¬Έν•λ” μμ„λ” μ¤‘μ”ν•μ§€ μ•λ‹¤. λ”°λΌμ„, BFSμ κ²°κ³Όλ” μ—¬λ¬κ°€μ§€κ°€ λ‚μ¬ μ μλ‹¤.

νΈλ¦¬κ°€ μ£Όμ–΄μ΅μ„ λ•, μ¬λ°”λ¥Έ BFS λ°©λ¬Έ μμ„μΈμ§€ κµ¬ν•΄λ³΄μ.

μ…λ ¥

μ²«μ§Έ μ¤„μ— μ •μ μ μ N(2 β‰¤ N β‰¤ 100,000)μ΄ μ£Όμ–΄μ§„λ‹¤. 
λ‘μ§Έ μ¤„λ¶€ν„° N-1κ°μ μ¤„μ—λ” νΈλ¦¬μ κ°„μ„  μ •λ³΄κ°€ μ£Όμ–΄μ§„λ‹¤. 
λ§μ§€λ§‰ μ¤„μ—λ” BFS λ°©λ¬Έ μμ„κ°€ μ£Όμ–΄μ§„λ‹¤. 
BFS λ°©λ¬Έ μμ„λ” ν•­μƒ Nκ°μ μ •μλ΅ μ΄λ£¨μ–΄μ Έ μμΌλ©°, 1λ¶€ν„° NκΉμ§€ μμ—°μκ°€ ν• λ²μ”© λ“±μ¥ν•λ‹¤.

μ¶λ ¥

μ…λ ¥μΌλ΅ μ£Όμ–΄μ§„ BFS λ°©λ¬Έ μμ„κ°€ μ¬λ°”λ¥Έ μμ„λ©΄ 1, μ•„λ‹λ©΄ 0μ„ μ¶λ ¥ν•λ‹¤.

#### λ¬Έμ  μ •λ¦¬

* μ–‘λ°©ν–¥ νΈλ¦¬κ°€ μ£Όμ–΄μ΅μ„ λ• μ¬λ°”λ¥Έ BFS λ°©λ¬Έ μμ„μΈμ§€ ν™•μΈν•λ‹¤

#### λ¬Έμ  λ¶„μ„
* κΉμ΄μ— λ”°λΌ μμ„κ°€ λ§λ”μ§€ ν™•μΈ
μλ¥Ό λ“¤μ–΄
```
1: 2 3 4
2: 5 6
3: 7
ans=1 2 3 4 5 6 7
idx=1

1μ μμ‹ 2,3 == ans[idx:idx+len(1μ μμ‹)]=2,3
idx+=len(1μ μμ‹)
2μ μμ‹ 5,6 == ans[idx:idx+len(2μ μμ‹)]=5,6
idx+=len(2μ μμ‹)
.
.
.

μ—¬κΈ°μ„ μ£Όμν•  μ μ€ νμ— λ„£μ„ λ• ans[idx:idx+len(2μ μμ‹)]λ΅ κ°±μ‹ ν•΄μ•Ό ν•λ‹¤
κ·Έ μ΄μ λ” μ •μ μ„ κΊΌλ‚΄λ” μμ„μ— λ”°λΌ λ’¤μ— μμ„κ°€ λ‹¬λΌμ§€κΈ° λ•λ¬Έ
μμ„Έν•κ²ƒμ€ ν‹€λ¦° μ΄μ μ—
```

## π’΅**μ•κ³ λ¦¬μ¦ μ„¤κ³„**

* μ‹μ‘ μ •μ μ„ νμ— μ¶”κ°€ν•κ³  λ°©λ¬Έ ν‘μ‹λ¥Ό ν•¨.
* νκ°€ λΉ„μ–΄μμ§€ μ•μ€ λ™μ• λ°λ³µ:
  * νμ—μ„ μ •μ μ„ κΊΌλ‚΄κ³ , μ΄ μ •μ κ³Ό μ—°κ²°λ μ•„μ§ λ°©λ¬Έν•μ§€ μ•μ€ μ •μ λ“¤μ„ ν™•μΈ.
  * ν„μ¬ μ •μ μ μμ‹λ“¤κ³Ό μ£Όμ–΄μ§„ BFS λ°©λ¬Έ μμ„μ™€ μΌμΉν•λ”μ§€ ν™•μΈ.
  * μΌμΉν•λ©΄ μμ‹λ“¤μ„ νμ— μ¶”κ°€ν•κ³ , λ‹¤μ λ°©λ¬Έ μμ„μ μ‹μ‘ μΈλ±μ¤λ¥Ό μ—…λ°μ΄νΈ.
  * μΌμΉν•μ§€ μ•μΌλ©΄ 0μ„ λ°ν™ν•κ³  μΆ…λ£.
* λ¨λ“  μ •μ μ„ λ°©λ¬Έν•κ³  μΌμΉν•λ©΄ 1μ„ λ°ν™.


## π’΅μ½”λ“

```python
from sys import stdin
from collections import deque
input = stdin.readline

def bfs():
    # ν μ΄κΈ°ν™”
    queue = deque()
    queue.append(1)  # μ‹μ‘ μ •μ  1μ„ νμ— λ„£μ
    visited[1] = 1  # μ‹μ‘ μ •μ  λ°©λ¬Έ ν‘μ‹
    idx = 1  # BFS λ°©λ¬Έ μμ„λ¥Ό λ‚νƒ€λ‚΄λ” μΈλ±μ¤ μ΄κΈ°ν™”

    while queue:
        x = queue.popleft()  # νμ—μ„ μ •μ μ„ ν•λ‚ κΊΌλƒ„
        children = []  # ν„μ¬ μ •μ μ μμ‹λ“¤μ„ μ €μ¥ν•  λ¦¬μ¤νΈ μ΄κΈ°ν™”

        # ν„μ¬ μ •μ κ³Ό μ—°κ²°λ μ •μ λ“¤μ— λ€ν•΄ λ°λ³µ
        for i in link[x]:
            if visited[i] == 0:  # μ•„μ§ λ°©λ¬Έν•μ§€ μ•μ€ μ •μ μΈ κ²½μ°
                visited[i] = 1  # λ°©λ¬Έ ν‘μ‹
                children.append(i)  # μμ‹μΌλ΅ μ¶”κ°€

        c_len = len(children)  # ν„μ¬ μ •μ μ μμ‹ κ°μ
        tmp = ans[idx : idx + c_len]  # BFS λ°©λ¬Έ μμ„μ™€ μΌμΉν•λ” λ¶€λ¶„μ„ μ„μ‹λ΅ μ¶”μ¶

        # BFS λ°©λ¬Έ μμ„μ™€ ν„μ¬ μ •μ μ μμ‹λ“¤μ΄ μΌμΉν•λ”μ§€ ν™•μΈ
        if set(tmp) == set(children):
            queue.extend(tmp)  # μΌμΉν•λ©΄ μμ‹λ“¤μ„ νμ— μ¶”κ°€ν•μ—¬ κ³„μ†ν•΄μ„ νƒμƒ‰
            idx += c_len  # λ‹¤μ λ°©λ¬Έ μμ„μ μ‹μ‘ μΈλ±μ¤ μ—…λ°μ΄νΈ
        else:
            return 0  # μΌμΉν•μ§€ μ•μΌλ©΄ 0μ„ λ°ν™ν•κ³  μΆ…λ£

    return 1  # λ¨λ“  μ •μ μ„ λ°©λ¬Έν•κ³  μΌμΉν•λ©΄ 1μ„ λ°ν™
        
# μ •μ μ κ°μ μ…λ ¥ λ°›κΈ°
N = int(input())

# κ°„μ„  μ •λ³΄λ¥Ό μ €μ¥ν•λ” λ¦¬μ¤νΈ μ΄κΈ°ν™”
link = [[] for i in range(N + 1)]

# μ •μ  κ°„μ μ—°κ²° μ •λ³΄ μ…λ ¥ λ°›κΈ°
for i in range(N - 1):
    a, b = map(int, input().split())
    link[a].append(b)
    link[b].append(a)

# BFS λ°©λ¬Έ μμ„ μ…λ ¥ λ°›κΈ°
ans = list(map(int, input().split()))

# μ‹μ‘ μ •μ μ΄ 1μΈ κ²½μ° BFS μ‹¤ν–‰ λ° κ²°κ³Ό μ¶λ ¥
if ans[0] == 1:
    print(bfs())
else:
    print(0)

```

## π’΅μ‹κ°„λ³µμ΅λ„
O(V + E) μ—¬κΈ°μ„ Vλ” μ •μ μ μμ΄κ³ , Eλ” κ°„μ„ μ μ
O(N)

## π’΅Β ν‹€λ¦° μ΄μ 
```python
#μμ •ν›„
if set(tmp) == set(children):
    queue.extend(tmp)  # μΌμΉν•λ©΄ μμ‹λ“¤μ„ νμ— μ¶”κ°€ν•μ—¬ κ³„μ†ν•΄μ„ νƒμƒ‰
    idx += c_len  # λ‹¤μ λ°©λ¬Έ μμ„μ μ‹μ‘ μΈλ±μ¤ μ—…λ°μ΄νΈ
#μμ •μ „
if set(tmp) == set(children):
    queue.extend(children)  # μΌμΉν•λ©΄ μμ‹λ“¤μ„ νμ— μ¶”κ°€ν•μ—¬ κ³„μ†ν•΄μ„ νƒμƒ‰
    idx += c_len  # λ‹¤μ λ°©λ¬Έ μμ„μ μ‹μ‘ μΈλ±μ¤ μ—…λ°μ΄νΈ
```
μ™ ν‹€λ Έλ”μ§€λ¥Ό ν•μ°Έμ„ μ°Ύμ•λ‹¤,,,
μ΄μ λ” μ„ μ½”λ“ λ•λ¬Έμ΄λ‹¤ μμ • ν›„μ™€ μμ „ μ „μ„ λ³΄λ©΄ queueμ— extendν•λ” λ³€μκ°€ λ‹¤λ¥Έ κ²ƒμ„ μ• μ μλ‹¤
chidrenμ— μ •μ μ„ λ„£μ„ λ•λ” μμ„λ€λ΅ μ €μ¥μ΄ λλ‹¤ μ¦‰ 1μ μμ‹μ΄ [2,3]μ΄λΌλ©΄ 2,3 μμ„λ€λ΅ μ €μ¥μ„ ν•κ³  μμ„κ°€ λ‹¤λ¥Ό μ μκΈ° λ•λ¬Έμ— setμΌλ΅ λ°”κΏ”μ„ λΉ„κµλ¥Ό ν•λ‹¤
μλ¥Ό λ“¤μ–΄λ³΄λ©΄
```
7
1 2
1 3
2 4
2 5
3 6
3 7
1 3 2 6 7 4 5
```
μΌ λ• 1μ μμ‹μΌλ΅ children=[2,3]μ΄ λλ‹¤ κ·Έλ¦¬κ³  νμ— extendν•λ‹ ν = [2,3]μ΄ λλ‹¤
νμ—μ„ λ¥Ό κΊΌλ‚΄λ©΄ children=[4,5]κ°€ λκ³  tmp=[6,7]μ΄ λμ–΄ ν‹€λ¦°λ‹¤κ³  ν•λ‹¤
μ¦‰, μ—¬κΈ°μ„ λ¬Έμ λ” 1 3 2 6 7 4 5 μμ„λ¥Ό λ³΄λ©΄ 2κ°€ μ•„λ‹λΌ 3μ„ λ¨Όμ € κΊΌλ‚΄μ„ λΉ„κµν•΄μ•Ό
[2, 3] [3, 2], [6, 7] [6, 7], [4, 5] [4, 5] λ΅ μ •λ‹µμ΄ λλ‹¤
κ·Έλμ„ νμ—λ” childrenμ΄ μ•„λ‹ μ…λ ¥μ„λ΅ μ£Όμ–΄μ§„ λ°©λ¬Έ μμ„λ¥Ό λ”°λΌμ•Ό ν•λ‹¤λ” κ²ƒμ΄λ‹¤


## π’΅Β λ‹¤λ¥Έ ν’€μ΄

```python

```

## π’΅Β λλ‚€μ  or κΈ°μ–µν• μ •λ³΄
μ†μΌλ΅ μ•κ³ λ¦¬μ¦ μ λ€λ΅ μ§λ³΄κΈ°